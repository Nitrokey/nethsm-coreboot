ifeq ($(CONFIG_INTEL_ACM),y)

cbfs-files-y += $(CONFIG_INTEL_CBFS_BIOS_ACM)
$(CONFIG_INTEL_CBFS_BIOS_ACM)-file := $(CONFIG_INTEL_BIOSACM_FILE)
$(CONFIG_INTEL_CBFS_BIOS_ACM)-type := raw
$(CONFIG_INTEL_CBFS_BIOS_ACM)-align := $(CONFIG_INTEL_BIOSACM_ALIGNMENT)

ifneq ($(CONFIG_INTEL_SINITACM_FILE),"")
cbfs-files-y += $(CONFIG_INTEL_CBFS_SINIT_ACM)
$(CONFIG_INTEL_CBFS_SINIT_ACM)-file := $(CONFIG_INTEL_SINITACM_FILE)
$(CONFIG_INTEL_CBFS_SINIT_ACM)-type := raw
$(CONFIG_INTEL_CBFS_SINIT_ACM)-compression := lzma
endif

ifeq ($(CONFIG_CPU_INTEL_FIRMWARE_INTERFACE_TABLE),y)

$(call add_intermediate, add_acm_fit, $(IFITTOOL) set_fit_ptr)
	$(IFITTOOL) -r COREBOOT -a -n $(CONFIG_INTEL_CBFS_BIOS_ACM) -t 2 \
		-s $(CONFIG_CPU_INTEL_NUM_FIT_ENTRIES) -f $<

endif # CPU_INTEL_FIRMWARE_INTERFACE_TABLE

endif
